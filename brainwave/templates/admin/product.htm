{% extends "content.htm" %}

{% block includes %}
    <script src="/static/js/admin/stock/new_stock.js"></script>
    <script src="/static/js/admin/product/product.js"></script>
    <script src="/static/js/admin/product/search_product.js"></script>
{% endblock %}

{% block content %}
    <script type="text/javascript">
        $('#collapseOne').collapse('show')
    </script>
    <div class="row">
        <div class="col-lg-11  ">
            <div class="input-group">
                <input type="text" id="search_field"  class="form-control">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button">
                        <span style="margin: 3px;" class="glyphicon glyphicon-search"></span>
                    </button>
                </span>
            </div><!-- /input-group -->
        </div>
    </div>
    <br />
    <div class="row col-md-12 custyle">
        <table class="table table-striped custab" id="products">
            <thead>
            <a href="{{url_for('admin.new_product')}}" class="btn btn-primary btn-xs pull-right"><b>+</b> Add new product</a>
                <tr>
                    <th>Product category</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Stock</th>
                    <th>Association</th>
                    <th class="text-center">Action</th>
                </tr>
            </thead>
            <tbody id="product_results">
                {% for item in data.products %}
                    <tr>
                        <td>{{item.product_category.name}}</td>
                        <td>{{item.name}}</td>
                        <td>€{{item.price}}</td>
                        <td>{{item.quantity}}{% if item.unit == 'amount' %}x{% else %}{{item.unit}}{% endif %}</td>
                        <!-- <td>{{item.quantity}}</td> -->
                        <td>{{item.quantity}}</td>
                        <td>{{item.stock.name}}</td>
                        <td>{{item.association.name}}</td>
                        <td class="text-center">
                            <button class="btn btn-info btn-xs edit" data-id={{item.id}}>
                                <span class="glyphicon glyphicon-edit"></span> 
                            </button>
                            <button class="btn btn-danger btn-xs remove" data-id={{item.id}}>
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="modal fade" id="remove_modal" tabindex="-1" role="dialog" aria-labelledby="modal_label" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="modal_label">Weet u zeker dat u dit product wil verwijderen?</h4>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger finalremove" data-dismiss="modal">DELETE</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <script type="text/template" id="product-template">
        <tr>
            <td><%= product_category_id %></td>
            <td><%= name %></td>
            <td>€<%= price %></td>
            <td><%= volume %></td>
            <td><%= stock_id %></td>
            <td><%= assoc_id %></td>
            <td class="text-center">
                <button class="btn btn-info btn-xs edit" data-id=<%= id %>>
                    <span class="glyphicon glyphicon-edit"></span> 
                </button>
                <button class="btn btn-danger btn-xs remove" data-id=<%= id %>>
                    <span class="glyphicon glyphicon-remove"></span>
                </button>
            </td>
        </tr>
    </script>​
{% endblock %}